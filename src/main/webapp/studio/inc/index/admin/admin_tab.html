 <div id="tabs-6">
  <div id="admin_layout">

    <div class="row-fluid">
      <ul class="breadcrumb"></ul>
    </div>

    <div class="row-fluid">
      <ul class="nav nav-list span2 well admin_nav_list">
        <li class="nav-header">Administration</li>
        <% if (studio.inGroup(com.feedhenry.studio.StudioBean.GROUP_ARM) || studio.inGroup(com.feedhenry.studio.StudioBean.GROUP_USER_ADMIN)) { %>
          <li>
            <a href="#" data-controller="admin.users.controller">
              <i class="icon-user"></i>
              Users
            </a>
          </li>
          <% if(studio.getProps().optBoolean("arm-auth-policy-enabled", false)) { %>
            <li>
              <a href="#" data-controller="admin.authpolicy.controller">
                <i class="icon-key"></i>
                Auth Policies
              </a>
            </li>
          <% } %>
        <% } %>

        <li>
          <a href="#" data-controller="admin.deploytarget.controller" class="deploy_targets">
            <i class="icon-road"></i>
            Deployment Targets
          </a>
        </li>
        <% if (studio.inGroup(com.feedhenry.studio.StudioBean.GROUP_ARM) || studio.inGroup(com.feedhenry.studio.StudioBean.GROUP_USER_ADMIN)) { %>
          <li class="nav-header">Mobile App Management</li>
          <li>
            <a href="#" data-controller="admin.stores.controller">
              <i class="icon-globe"></i>
              App Store
            </a>
          </li>
          <li>
              <a href="#" data-controller="admin.auditlogs.controller">
                  <i class="icon-book"></i>
                  Audit Log
              </a>
          </li>

          <li>
            <a href="#" data-controller="admin.storeitem.groups.controller">
              <i class="icon-group"></i>
              Groups
            </a>
          </li>
          <li>
            <a href="#" data-controller="admin.storeitems.controller">
              <i class="icon-pencil"></i>
              Store Items
            </a>
          </li>
          <li>
            <a href="#" data-controller="admin.devices.controller">
              <i class="icon-phone"></i>
              Devices
            </a>
          </li>
        <% } %>
      </ul>

      <!-- Hide this initially and let javascript show it when its ready -->
      <div class="layout-content span10">

        <!-- Users Templates -->
        <div id="useradmin_user_list" class="hidden_template row-fluid">
          <div class="alerts"></div>
          <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="useradmin_users_table"></table>
        </div>

        <div id="useradmin_user_create" class="hidden_template row-fluid">
          <div class="alerts"></div>
          <form class="well form-horizontal">
            <fieldset>
              <legend>Create a User</legend>
              <p>Here you can create a user for your domain.</p>
              <div class="control-group required">
                <label class="control-label" for="create_user_id">User ID</label>
                <div class="controls">
                  <input type="text" class="input-xxlarge" id="create_user_id" placeholder="User ID"></div>
              </div>
              <div class="control-group">
                <label class="control-label" for="create_user_password">Password (Optional)</label>
                <div class="controls">
                  <input type="password" class="input-xxlarge" id="create_user_password" placeholder="Password"></div>
              </div>
              <div class="control-group">
                <label class="control-label" for="create_user_email">Email Address (Optional)</label>
                <div class="controls">
                  <input type="text" class="input-xxlarge" id="create_user_email" placeholder="Email Address"></div>
              </div>
              <div class="control-group">
                <label class="control-label" for="create_user_name">Name (Optional)</label>
                <div class="controls">
                  <input type="email" class="input-xxlarge" id="create_user_name" placeholder="Name"></div>
              </div>
              <div class="control-group">
                <label class="control-label" for="create_user_invite">Invite</label>
                <div class="controls">
                  <label class="checkbox">
                    <input type="checkbox" class="input-xxlarge" id="create_user_invite">Send Invite Email?</label>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label">Roles</label>
                <div class="controls swap-select" id="create_user_role_swap">
                  <div class="span3">
                    <select multiple="multiple" class="span12 swap-from">
                      <option>Loading...</option>
                    </select>
                  </div>
                  <div class="span1">
                    <button class="btn btn-inverse btn-large add">&gt;</button>
                    <button class="btn btn-inverse btn-large remove">&lt;</button>
                  </div>
                  <div class="span3">
                    <select multiple="multiple" class="span12 swap-to">
                    </select>
                  </div>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label">Auth Policies</label>
                <div class="controls swap-select" id="create_user_policy_swap">
                  <div class="span3">
                    <select multiple="multiple" class="span12 swap-from">
                      <option>Loading...</option>
                    </select>
                  </div>
                  <div class="span1">
                    <button class="btn btn-inverse btn-large add">&gt;</button>
                    <button class="btn btn-inverse btn-large remove">&lt;</button>
                  </div>
                  <div class="span3">
                    <select multiple="multiple" class="span12 swap-to">
                    </select>
                  </div>
                </div>
              </div>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary create_user_btn">Create User</button>
            </div>
          </fieldset>
        </form>
      </div>

      <div id="useradmin_user_update" class="hidden_template row-fluid">
        <div class="alerts"></div>
        <form class="well form-horizontal">
          <fieldset>
            <legend>Update a User</legend>
            <p>Here you can update a user for your domain.</p>
            <div class="control-group required">
              <label class="control-label" for="update_user_id">User ID</label>
              <div class="controls">
                <input type="text" disabled="disabled" class="input-xxlarge" id="update_user_id" placeholder="User ID"></div>
            </div>
            <div class="control-group">
              <label class="control-label" for="update_user_password">Password (Optional)</label>
              <div class="controls">
                <input type="password" class="input-xxlarge" id="update_user_password" placeholder="Password"></div>
            </div>
            <div class="control-group">
              <label class="control-label" for="update_user_email">Email Address (Optional)</label>
              <div class="controls">
                <div class="input-append">
                  <input type="text" class="input-xxlarge" id="update_user_email" placeholder="Email Address"><button type="submit" class="btn invite_user_btn">Send Invite Email</button>
                </div>
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="update_user_name">Name (Optional)</label>
              <div class="controls">
                <input type="email" class="input-xxlarge" id="update_user_name" placeholder="Name"></div>
            </div>

            <div class="control-group">
              <label class="control-label" for="update_user_enabled">Enabled?</label>
              <div class="controls">
              <input type="checkbox" class="input-xxlarge enable_user_button" id="update_user_enabled">
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="update_user_blacklisted">Purge User Data?</label>
              <div class="controls">
                <input type="checkbox" class="input-xxlarge blacklist_user_button" id="update_user_blacklisted">
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Roles</label>
              <div class="controls swap-select" id="update_user_role_swap">
                <div class="span3">
                  <select multiple="multiple" class="span12 swap-from">
                    <option>Loading...</option>
                  </select>
                </div>
                <div class="span1">
                  <button class="btn btn-inverse btn-large add">&gt;</button>
                  <button class="btn btn-inverse btn-large remove">&lt;</button>
                </div>
                <div class="span3">
                  <select multiple="multiple" class="span12 swap-to">
                    <option>Loading...</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Auth Policies</label>
              <div class="controls swap-select" id="update_user_policy_swap">
                <div class="span3">
                  <select multiple="multiple" class="span12 swap-from">
                    <option>Loading...</option>
                  </select>
                </div>
                <div class="span1">
                  <button class="btn btn-inverse btn-large add">&gt;</button>
                  <button class="btn btn-inverse btn-large remove">&lt;</button>
                </div>
                <div class="span3">
                  <select multiple="multiple" class="span12 swap-to">
                    <option>Loading...</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary update_user_btn">Update User</button>
            </div>
          </fieldset>
        </form>
      </div>

      <div id="useradmin_user_import" class="hidden_template row-fluid">
        <div class="alerts"></div>
        <form class="well form-horizontal">
          <fieldset>
            <legend>Import Users</legend>
            <p>Here you can mass create users by uploading a CSV file</p>
            <br/>            
            <p>
              Each line in your CSV file should be in the following format:              
            </p>
            <br/>
            <p>
              <code>&lt;UserID&gt;,&lt;Email&gt;,&lt;Name&gt;,&lt;Password&gt;</code>
            </p>
            <br/>            
            <p>
              e.g.
              <br/>            
              <br/>            
              <code>joebloggs, joe.bloggs@example.com, Joe Bloggs, password</code><br/>
              <code>john, , John Bloggs, password</code>
              <br><code>jane.bloggs, jane.bloggs@example.com, , password</code></p>
            <br/>

            <div class="control-group">
              <label class="control-label" for="import_users_file">CSV File</label>
              <div class="controls">
                <input class="input-file" id="import_users_file" type="file">
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="import_users_invite">Invite</label>
              <div class="controls">
                <label class="checkbox">
                  <input type="checkbox" class="input-xxlarge" id="import_users_invite">Send Invite Emails?</label>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Roles</label>
              <div class="controls swap-select" id="import_users_role_swap">
                <div class="span3">
                  <select multiple="multiple" class="span12 swap-from">
                    <option>Loading...</option>
                  </select>
                </div>
                <div class="span1">
                  <button class="btn btn-inverse btn-large add">&gt;</button>
                  <button class="btn btn-inverse btn-large remove">&lt;</button>
                </div>
                <div class="span3">
                  <select multiple="multiple" class="span12 swap-to">
                  </select>
                </div>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Auth Policies</label>
              <div class="controls swap-select" id="import_users_policy_swap">
                <div class="span3">
                  <select multiple="multiple" class="span12 swap-from">
                    <option>Loading...</option>
                  </select>
                </div>
                <div class="span1">
                  <button class="btn btn-inverse btn-large add">&gt;</button>
                  <button class="btn btn-inverse btn-large remove">&lt;</button>
                </div>
                <div class="span3">
                  <select multiple="multiple" class="span12 swap-to">
                  </select>
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary import_user_btn">Import Users</button>
            </div>
          </fieldset>
        </form>
      </div>

      
      <!-- StoreItem Groups templates -->
        <div id="admin_storeitem_group_list" class="hidden_template row-fluid">
            <div class="alerts"></div>
            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="admin_storeitem_groups_table"></table>
        </div>

        <div id="admin_storeitem_group_create" class="hidden_template row-fluid">
            <div class="alerts"></div>
            <form class="well form-horizontal">
                <fieldset>
                    <legend>Create a Group</legend>
                    <p>
                        Groups can be used to group users together. For example, you can group users for one project together so they can see one another's apps.
                    </p>
                    <div class="control-group required">
                        <label class="control-label" for="create_group_name">Name</label>
                        <div class="controls">
                            <input type="text" class="input-xxlarge" id="create_group_name" placeholder="Group Name"></div>
                    </div>
                    <div class="control-group required">
                        <label class="control-label" for="create_group_desc">Description</label>
                        <div class="controls">
                            <input type="text" class="input-xxlarge" id="create_group_desc" placeholder="Group Description"></div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary create_group_btn">Create group</button>
                    </div>
                </fieldset>
            </form>
        </div>


        <div id="admin_storeitem_group_update" class="hidden_template row-fluid">
          <div class="alerts"></div>
          <form class="well form-horizontal">
            <input type="hidden" id="update_group_id" >        

            <fieldset>
              <legend>Update a Group</legend>
              <p>
                Groups can be used to group users and app store items together. For example, you can group users for one project together so they can see a subset of your appstore items.
              </p>
              <div class="control-group required">
                <label class="control-label" for="update_group_name">Name</label>
                <div class="controls">
                  <input type="text" disabled="disabled" class="input-xxlarge" id="update_group_name" placeholder="Group Name"></div>
              </div>
              <div class="control-group">
                <label class="control-label" for="update_group_description">Description (Optional)</label>
                <div class="controls">
                  <input type="text" class="input-xxlarge" id="update_group_description" placeholder="Group Description"></div>
              </div>

              <div class="control-group">
                <label class="control-label">Store Items</label>
                <div class="controls swap-select update_group_storeitem_swap">
                  <div class="span3">
                    <span>Available</span>
                    <select multiple="multiple" class="span12 swap-from updategroup_store_items_available"></select>
                  </div>
                  <div class="span1">
                    <button class="btn btn-inverse btn-large add">&gt;</button>
                    <button class="btn btn-inverse btn-large remove">&lt;</button>
                  </div>
                  <div class="span3">
                    <span>Assigned to group</span>
                    <select multiple="multiple" class="span12 swap-to updategroup_store_items_assigned"></select>
                  </div>
                  <span class="help-inline span4">
                    <br/>        
                    These Store Items will appear in your App Store
                  </span>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label">Users</label>
                <div class="controls swap-select update_group_storeitem_swap">
                  <div class="span3">
                    <span>Available</span>
                    <select multiple="multiple" class="span12 swap-from updategroup_users_available"></select>
                  </div>
                  <div class="span1">
                    <button class="btn btn-inverse btn-large add">&gt;</button>
                    <button class="btn btn-inverse btn-large remove">&lt;</button>
                  </div>
                  <div class="span3">
                    <span>Selected</span>
                    <select multiple="multiple" class="span12 swap-to updategroup_users_assigned"></select>
                  </div>
                  <span class="help-inline span4">
                    <br/>        
                    These users are assigned to this particular group
                  </span>
                </div>
              </div>

              <div class="form-actions">
                <button type="submit" class="btn btn-primary update_group_btn">Update Group</button>
              </div>
            </fieldset>
          </form>
        </div>


        <div id="admin_storeitem_group_boolean_modal" class="modal hide fade hidden_template">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h3>Alert</h3>
            </div>
            <div class="modal-body">
                <p></p>
            </div>
            <div class="modal-footer">
                <a href="#" class="btn" data-dismiss="modal">No</a>
                <a href="#" class="btn btn-primary">Yes</a>
            </div>
        </div>

      <!-- end storeitem groups templates -->

    <!-- admin auditlog templates -->
        <div id="admin_audit_log_list" class="hidden_template row-fluid">
            <div class="alerts"></div>
            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="admin_audit_logs_list_table"></table>
        </div>
        <!-- end auditlog templates -->

      <!-- Storeitem templates -->
      <ul id="admin_store_items" class="hidden_template">
        <div class="alerts"></div>
        <div class="admin_store_items_controls">
          <button class="btn btn-primary ">Create Store Item</button>
        </div>
      </ul>

      <li id="admin_store_item" class="hidden_template admin_store_item well">
        <div class="row-fluid">
          <div class="span2 icon_container">
            <img src="" alt="" class="icon" />
          </div>
          <div class="details span8">
            <h3 class="name"></h3>
            <p class="description"></p>
          </div>
          <div class="span2 controls">
            <button class="btn btn-inverse edit_store_item">Edit</button>
            <br/>
            <button class="btn btn-danger delete_store_item">Delete</button>
          </div>
        </div>
      </li>

      <div id="admin_store_item_create" class="hidden_template row-fluid">
        <div class="alerts"></div>
        <form class="well form-horizontal">
          <h3>Create a new Store Item</h3>
          <br/>
          <div class="control-group required">
            <label class="control-label">Name</label>
            <div class="controls">
              <input type="text" class="item_name input-xlarge" placeholder="Name">
            </div>
          </div>

          <div class="control-group required">
            <label class="control-label">Auth Token</label>
            <div class="controls">
              <input type="text" class="input-xlarge item_id" placeholder="Auth Token">
              <span class="help-inline">Your Auth Token can be used to identify your app when using $fh.auth to track app access events</span>
            </div>
          </div>

          <div class="control-group required">
            <label class="control-label" for="textarea">Description</label>
            <div class="controls">
              <textarea class="input-xlarge item_description" id="textarea" rows="3"></textarea>
            </div>
          </div>

          <div class="control-group">
            <label class="control-label">Auth Policies</label>
            <div class="controls swap-select store_item_auth_policies_swap">
              <div class="span3">
                <span>Available</span>
                <select multiple="multiple" class="span12 swap-from store_item_available_auth_policies">
                </select>
              </div>
              <div class="span1">
                <button class="btn btn-inverse btn-large add">&gt;</button>
                <button class="btn btn-inverse btn-large remove">&lt;</button>
              </div>
              <div class="span3">
                <span>Assigned</span>
                <select multiple="multiple" class="span12 swap-to store_item_assigned_auth_policies">
                </select>
              </div>
              <span class="help-inline span4"><br/>These Auth Policies will be applied to $fh.auth calls in your Store Item.</span>
            </div>
          </div>

          <div class="control-group">
            <label class="control-label" for="textarea">Restrict to Groups</label>
            <div class="controls">
              <label class="checkbox"><input type="checkbox" class="input restrict_to_groups"/>Restrict this store item to specified groups?</label>
            </div>
          </div>

          <div class="control-group">
            <label class="control-label">Store Groups</label>
            <div class="controls swap-select store_item_groups_swap">
              <div class="span3">
                <span>Available</span>
                <select multiple="multiple" class="span12 swap-from store_item_available_groups">
                </select>
              </div>
              <div class="span1">
                <button class="btn btn-inverse btn-large add">&gt;</button>
                <button class="btn btn-inverse btn-large remove">&lt;</button>
              </div>
              <div class="span3">
                <span>Assigned</span>
                <select multiple="multiple" class="span12 swap-to store_item_assigned_groups">
                </select>
              </div>
              <span class="help-inline span4"><br/>Users in these groups will be able to see this Store Item.</span>
            </div>
          </div>



          <div class="form-actions">
            <button type="submit" class="btn btn-primary create_store_item">Create Item</button>
          </div>
        </form>
      </div>

      <div id="admin_store_item_update" class="hidden_template row-fluid">
        <div class="alerts"></div>
        <input type="hidden" class="item_guid">

        <form class="well form-horizontal">
          <img src="" class="store_item_icon right">
          <h3>Update Store Item</h3>
          <br/>
          <div class="control-group required" style="display: inline-block;">
            <label class="control-label">Name</label>
            <div class="controls">
              <input type="text" class="item_name input-xlarge" placeholder="Name">
            </div>
          </div>

          <div class="control-group required">
            <label class="control-label">Auth Token</label>
            <div class="controls">
              <input type="text" class="input-xlarge item_id" placeholder="Auth Token">
              <span class="help-inline">Your Auth Token can be used to identify your app when using $fh.auth to track app access events</span>
            </div>
          </div>

          <div class="control-group required">
            <label class="control-label" for="textarea">Description</label>
            <div class="controls">
              <textarea class="input-xlarge item_description" id="textarea" rows="3"></textarea>
            </div>
          </div>

          <div class="control-group">
            <label class="control-label">Auth Policies</label>
            <div class="controls swap-select store_item_auth_policies_swap">
              <div class="span3">
                <span>Available</span>
                <select multiple="multiple" class="span12 swap-from store_item_available_auth_policies">
                </select>
              </div>
              <div class="span1">
                <button class="btn btn-inverse btn-large add">&gt;</button>
                <button class="btn btn-inverse btn-large remove">&lt;</button>
              </div>
              <div class="span3">
                <span>Assigned</span>
                <select multiple="multiple" class="span12 swap-to store_item_assigned_auth_policies">
                </select>
              </div>
              <span class="help-inline span4"><br/>These Auth Policies will be applied to $fh.auth calls in your Store Item.</span>
            </div>
          </div>

          <div class="control-group">
            <label class="control-label" for="textarea">Restrict to Groups</label>
            <div class="controls">
              <label class="checkbox"><input type="checkbox" class="input restrict_to_groups"/>Restrict this store item to specified groups?</label>
            </div>
          </div>

          <div class="control-group">
            <label class="control-label">Store Groups</label>
            <div class="controls swap-select store_item_groups_swap">
              <div class="span3">
                <span>Available</span>
                <select multiple="multiple" class="span12 swap-from store_item_available_groups">
                </select>
              </div>
              <div class="span1">
                <button class="btn btn-inverse btn-large add">&gt;</button>
                <button class="btn btn-inverse btn-large remove">&lt;</button>
              </div>
              <div class="span3">
                <span>Assigned</span>
                <select multiple="multiple" class="span12 swap-to store_item_assigned_groups">
                </select>
              </div>
              <span class="help-inline span4"><br/>Users in these groups will be able to see this Store Item.</span>
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary update_store_item">Update Item Details</button>
          </div>

          <div class="store_item_binaries">
            <h3>Upload App Binaries & App Store Icon</h3><br/>
            <table class="table table-bordered table-striped store_item_binaries_table">
              <thead>
                <tr>
                  <th>Type</th>
                  <th>Description</th>
                  <th>Configuration</th>
                  <th>Upload Binary</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>App Store Icon</td>
                  <td>Store Item icons should be 128x128px and in PNG format.</td>
                  <td>&nbsp;</td>
                  <td><input type="file" id="icon_binary" class="input-xlarge"/></td>
                </tr>
                <tr>
                  <td><div class="device_icon android"></div>Android Binary</td>
                  <td>An Android binary consists of an <code>.apk</code> signed for distribution.</td>
                  <td>&nbsp;</td>
                  <td><input type="file" id="android_binary" class="input-xlarge"/></td>
                </tr>
                <tr>
                  <td><div class="device_icon iphone"></div>iPhone Binary</td>
                  <td>An iPhone binary consists of an <code>.ipa</code> signed for distribution. You will also need to provide us with the Bundle ID of the binary you're uploading (this value is in your Info.plist).</td>
                  <td><input type="text" name="iphone_bundle_id" value="" class="bundle_id" data-destination="iphone" placeholder="iPhone Bundle ID" disabled="disabled"><br/><button class="btn btn-primary update_bundle_id" disabled="disabled">Update</button></td>
                  <td><input type="file" id="iphone_binary" class="input-xlarge"/></td>
                </tr>
                <tr>
                  <td><div class="device_icon ipad"></div>iPad Binary</td>
                  <td>An iPad binary consists of an <code>.ipa</code> signed for distribution. You will also need to provide us with the Bundle ID of the binary you're uploading (this value is in your Info.plist).</td>
                  <td><input type="text" name="ipad_bundle_id" value="" class="bundle_id" data-destination="ipad" placeholder="iPad Bundle ID" disabled="disabled"><br/><button class="btn btn-primary update_bundle_id" disabled="disabled">Update</button></td>
                  <td><input type="file" id="ipad_binary" class="input-xlarge"/></td>
                </tr>
                <tr>
                  <td><div class="device_icon ios"></div>iOS Universal Binary</td>
                  <td>An iOS Universal Binary consists of an <code>.ipa</code> signed for distribution. You will also need to provide us with the Bundle ID of the binary you're uploading (this value is in your Info.plist).</td>
                  <td><input type="text" name="ios_bundle_id" value="" class="bundle_id" data-destination="ios" placeholder="iOS Universal Bundle ID" disabled="disabled"><br/><button class="btn btn-primary update_bundle_id" disabled="disabled">Update</button></td>
                  <td><input type="file" id="ios_binary" class="input-xlarge"/></td>
                </tr>
              </tbody>
            </table>
          </div>
        </form>
      </div>

      <!-- AppStore template -->
      <div id="admin_app_store" class="hidden_template row-fluid">
        <div class="alerts"></div>
        <input type="hidden" class="store_guid">
        <form class="well form-horizontal">
          <img src="" class="store_icon right">
          <h3>App Store</h3>
          <br/>

          <div class="control-group required" style="display: inline-block;">
            <label class="control-label" for="store_name">Name</label>
            <div class="controls">
              <input type="text" class="store_name input-xxlarge" placeholder="My App Store">
            </div>
          </div>

          <div class="control-group required">
            <label class="control-label" for="store_description">Description</label>
            <div class="controls">
              <textarea class="input-xxlarge store_description" id="store_description" rows="3"></textarea>
            </div>
          </div>

          <div class="control-group">
            <label class="control-label" for="textarea">Icon</label>
            <div class="controls">
              <input type="file" class="app_store_icon input-xlarge" /><br/>
              <span class="help-inline">Your App Store Icon should be 128x128 in size, and in PNG format.</span>
            </div>
          </div>

          <div class="control-group">
            <label class="control-label">Store Items</label>
            <div class="controls swap-select app_store_store_items">
              <div class="span3">
                <span>Available</span>
                <select multiple="multiple" class="span12 swap-from app_store_store_items_available">
                </select>
              </div>
              <div class="span1">
                <button class="btn btn-inverse btn-large add">&gt;</button>
                <button class="btn btn-inverse btn-large remove">&lt;</button>
              </div>
              <div class="span3">
                <span>In Store</span>
                <select multiple="multiple" class="span12 swap-to app_store_store_items_assigned">
                </select>
              </div>
              <span class="help-inline span4"><br/>These Store Items will appear in your App Store</span>
            </div>
          </div>

          <div class="control-group">
            <label class="control-label">Auth Policies</label>
            <div class="controls swap-select app_store_auth_policies_swap">
              <div class="span3">
                <span>Available</span>
                <select multiple="multiple" class="span12 swap-from app_store_available_auth_policies">
                </select>
              </div>
              <div class="span1">
                <button class="btn btn-inverse btn-large add">&gt;</button>
                <button class="btn btn-inverse btn-large remove">&lt;</button>
              </div>
              <div class="span3">
                <span>Assigned</span>
                <select multiple="multiple" class="span12 swap-to app_store_assigned_auth_policies">
                </select>
              </div>
              <span class="help-inline span4"><br/>Here you can define a list of supported auth policies for logging into your App Store.</span>
            </div>
          </div>
            <div class="control-group hidden">
                <label class="control-label">Authorised Access Only</label>
                <div class="controls">
                    <input type="checkbox" name="authed_access" class="hidden" />
                </div>
            </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary update_app_store">Update App Store</button>
          </div>
        </form>
      </div>
      <!--/AppStore template -->

      <!-- AuthPolicy Templates -->
      <div id="auth_policies_list" class="hidden_template row-fluid">
        <div id="auth_policies_alerts"></div>
        <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="auth_policies_list_table"></table>
      </div>

      <div id="auth_policies_create" class="hidden_template row-fluid">
      <form class="well form-horizontal">
        <legend>Create an Auth Policy</legend>
        <p>Here you can create an Authentication/Authorization policy which can be used by your applications.</p>
        <div class="control-group">
          <label class="control-label" for="create_policy_id">Policy Id</label>
          <div class="controls">
            <input id="create_policy_id" type="text" class="input-xxlarge" placeholder="Policy Id">
          </div>
        </div>
        <fieldset class="well">  <!-- Authentication well -->
          <legend>Authentication</legend>
          <div class="control-group">
            <label class="control-label">Type</label>
            <label class="select">
              <div class="controls">
                <select class="" id="create_policy_type">
                  <option value="OAUTH2" selected="selected"> OAUTH2 </option>
                  <option value="LDAP"> LDAP </option>
                  <option value="FEEDHENRY"> FEEDHENRY </option>
                </select>
              </div>
            </label>
          </div>
          
          <div id="create_oauth2_div">
            
            <div class="control-group">
              <label class="control-label">Provider</label>
              <label class="select">
                <div class="controls">
                  <select id="create_policy_conf_provider">
                    <option value="google">Google</option>
                  </select>
                </div>
              </label>
            </div>
            
            <div class="control-group"> 
              <label class="control-label" for="create_client_id">Client Id</label>
              <div class="controls">
                <input id="create_client_id" type="text" class="input-xxlarge" placeholder="Client Id (provided by Oauth service (ie Google etc...))">
              </div>
            </div>
            
            <div class="control-group">
              <label class="control-label" for="create_client_secret">Client Secret</label>
              <div class="controls">
                <input id="create_client_secret" type="text" class="input-xxlarge" placeholder="Client Secret (provided by Oauth service (ie Google etc...))">
              </div>
            </div>
            
            <div class="control-group">
              <!-- TODO - this 'Note' needs to be an info text or something -->
              <label class="control-label" for="create_oauth_callback">Oauth Callback Url</label>
              <div class="controls">
                <input id="create_oauth_callback" type="text" class="input-xxlarge" disabled="disabled">
              </div>
              <span class="help-inline span6">(Note* this should be added as the oauth callback url on the provider side i.e Google)</span>
            </div>

          </div> <!-- oauth div -->

          <div id="create_ldap_div">
            
            <div class="control-group">
              <label class="control-label">Authentication Method</label>
              <label class="select">
                <div class="controls">
                  <select id="create_authmethod_id">
                    <option value="simple">Simple</option>
                    <option value="DIGEST-MD5">Digest MD5 (SASL)</option>
                    <option value="CRAM-MD5">CRAM MD5 (SASL)</option>
                  </select>
                </div>
              </label>
            </div>
            
            <div class="control-group">
              <label class="control-label" for="create_ldap_url_id">Url</label>
              <div class="controls">
                <input id="create_ldap_url_id" type="text" class="input-xxlarge" placeholder="ldap://foo.example.com:389/">
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="create_dn_prefix_id">Distinguished Name (dn) Prefix</label>
              <div class="controls">
                <input id="create_dn_prefix_id" type="text" class="input-xxlarge" placeholder="normally 'uid' or 'cn'">
              </div>
            </div>
            
            <div class="control-group">
              <label class="control-label" for="create_dn_id">Distinguished Name (dn) </label>
              <div class="controls">
                <input id="create_dn_id" type="text" class="input-xxlarge" placeholder="e.g. ou=people,dc=example,dc=com">
              </div>
            </div>
          </div> <!-- ldap div -->
          <div id="create_feedhenry_div">
          </div>
        </fieldset> <!-- end of authentication well -->
        <fieldset class="well"> <!-- start of authorization well -->
          <legend>Authorization</legend>
          <div class="control-group">
            <div class="controls">
              <label class="checkbox"><input type="checkbox" class="input" id="create_check_user_exists_id"/>Check if user exists on platform?</label>
            </div>
            <div class="controls">
              <label class="checkbox"><input type="checkbox" class="input" id="create_check_user_approved_id"/>Check if user approved for auth</label>
            </div>
          </div>

          <div class="control-group" id="create_approved_users">
            <label class="control-label">Users</label>
            <div class="controls swap-select" id="create_approved_users_auth_policies_swap">
              <div class="span3">
                <span>Available</span>
                <select multiple="multiple" class="span12 swap-from">
                </select>
              </div>
              <div class="span1">
                <button class="btn btn-inverse btn-large add">&gt;</button>
                <button class="btn btn-inverse btn-large remove">&lt;</button>
              </div>
              <div class="span3">
                <span>Approved</span>
                <select multiple="multiple" class="span12 swap-to">
                </select>
              </div>
            </div>
          </div>

        </fieldset> <!-- authorization well -->
        <button type="button" id="create_policy_btn" class="btn btn-primary">Create Policy</button>
      </form>
      </div>

      <div id="auth_policies_update" class="hidden_template row-fluid">
        <form class="well form-horizontal">
          <legend>Update an Auth Policy</legend>
          <p>Here you can update an Authentication/Authorization policy which can be used by your applications.</p>
          <div class="control-group">
            <label class="control-label" for="update_policy_id">Policy Name</label>
            <div class="controls">
              <input id="update_policy_id" type="text" class="input-xxlarge" placeholder="Policy Name">
            </div>
          </div>
          <fieldset class="well">  <!-- Authentication well -->
            <legend>Authentication</legend>
            <div class="control-group">
              <label class="control-label">Type</label>
              <label class="select">
                <div class="controls">
                  <select class="" id="update_policy_type">
                    <option value="OAUTH2" selected="selected"> OAUTH2 </option>
                    <option value="LDAP"> LDAP </option>
                    <option valie="FEEDHENRY"> FEEDHENRY </option>
                  </select>
                </div>
              </label>
            </div>
            
            <div id="update_oauth2_div">
              
              <div class="control-group">
                <label class="control-label">Provider</label>
                <label class="select">
                  <div class="controls">
                    <select id="update_policy_conf_provider">
                      <option value="google">Google</option>
                    </select>
                  </div>
                </label>
              </div>
              
              <div class="control-group"> 
                <label class="control-label" for="update_client_id">Client Id</label>
                <div class="controls">
                  <input id="update_client_id" type="text" class="input-xxlarge" placeholder="Client Id (provided by Oauth service (ie Google etc...))">
                </div>
            </div>
              
              <div class="control-group">
                <label class="control-label" for="update_client_secret">Client Secret</label>
                <div class="controls">
                  <input id="update_client_secret" type="text" class="input-xxlarge" placeholder="Client Secret (provided by Oauth service (ie Google etc...))">
                </div>
              </div>
              
              <div class="control-group">
                <!-- TODO - this 'Note' needs to be an info text or something -->
                <label class="control-label" for="update_oauth_callback">Oauth Callback Url</label>
                <div class="controls">
                  <input id="update_oauth_callback" type="text" class="input-xxlarge" disabled="disabled">
                </div>
                <span class="help-inline span6">(Note* this should be added as the oauth callback url on the provider side i.e Google)</span>
              </div>
              
            </div> <!-- oauth div -->
            
            <div id="update_ldap_div">
              
              <div class="control-group">
                <label class="control-label">Authentication Method</label>
                <label class="select">
                  <div class="controls">
                    <select id="update_authmethod_id">
                      <option value="simple">Simple</option>
                      <option value="DIGEST-MD5">Digest MD5 (SASL)</option>
                      <option value="CRAM-MD5">CRAM MD5 (SASL)</option>
                    </select>
                  </div>
                </label>
              </div>
              
              <div class="control-group">
                <label class="control-label" for="update_ldap_url_id">Url</label>
                <div class="controls">
                  <input id="update_ldap_url_id" type="text" class="input-xxlarge" placeholder="ldap://foo.example.com:389/">
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="update_dn_prefix_id">Distinguished Name (dn) Prefix</label>
                <div class="controls">
                  <input id="update_dn_prefix_id" type="text" class="input-xxlarge" placeholder="normally 'uid' or 'cn'">
                </div>
              </div>
              
              <div class="control-group">
                <label class="control-label" for="update_dn_id">Distinguished Name (dn) </label>
                <div class="controls">
                  <input id="update_dn_id" type="text" class="input-xxlarge" placeholder="e.g. ou=people,dc=example,dc=com">
                </div>
              </div>
            </div> <!-- end ldap div -->
            <div id="update_feedhenry_div">
            </div>
          </fieldset> <!-- authentication well -->
          <fieldset class="well"> <!-- authorization well -->
            <legend>Authorization</legend> 
            <div class="control-group">
              <div class="controls">
                <label class="checkbox"><input type="checkbox" class="input" id="update_check_user_exists_id"/>Check if user exists on platform?</label>
              </div>
              <div class="controls">
                <label class="checkbox"><input type="checkbox" class="input" id="update_check_user_approved_id"/>Check if user approved for auth</label>
              </div>

          <div class="control-group" id="update_approved_users">
            <label class="control-label">Users</label>
            <div class="controls swap-select" id="update_approved_users_auth_policies_swap">
              <div class="span3">
                <span>Available</span>
                <select multiple="multiple" class="span12 swap-from">
                </select>
              </div>
              <div class="span1">
                <button class="btn btn-inverse btn-large add">&gt;</button>
                <button class="btn btn-inverse btn-large remove">&lt;</button>
              </div>
              <div class="span3">
                <span>Approved</span>
                <select multiple="multiple" class="span12 swap-to">
                </select>
              </div>
            </div>
          </div>

            </div>
          </fieldset> <!-- /authorization well -->
          <input type="hidden" name="guid" id="update_guid" value=""/>
        <button type="button" id="update_policy_btn" class="btn btn-primary">Update Policy</button>        
        </form>
      </div>

      <!-- Devices template -->
      <div id="admin_devices_list" class="hidden_template row-fluid">
        <div class="alerts"></div>
        <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="admin_devices_table"></table>
      </div>

      <div id="admin_devices_update" class="hidden_template row-fluid">
        <div class="alerts"></div>
        <form class="well form-horizontal">
          <fieldset>
            <legend>View Device</legend>
            <div class="control-group">
              <label class="control-label" for="update_device_name">Label</label>
              <div class="controls">
                <input type="text" class="input-xxlarge" id="update_device_name" placeholder="A friendly name for the device">
                <button class="btn update_device_name_btn">Update Label</button>
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="device_cuid">Device ID</label>
              <div class="controls">
                <input type="text" disabled="disabled" class="input-xxlarge" id="device_cuid">
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="device_last_access">Last Access</label>
              <div class="controls">
                <input type="text" disabled="disabled" class="input-xxlarge" id="device_last_access">
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="device_first_seen">First Seen</label>
              <div class="controls">
                <input type="text" disabled="disabled" class="input-xxlarge" id="device_first_seen">
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="device_disabled">Disabled?</label>
              <div class="controls">
                <input type="checkbox" class="input-xxlarge" id="device_update_disabled">
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="device_blacklisted">Purge Device Data?</label>
              <div class="controls">
                <input type="checkbox" class="input-xxlarge update_device_blacklisted_btn" id="device_update_blacklisted">
              </div>
            </div>
            <div class="control-group">
              <div class="controls">
                <fieldset class="well span5">
                  <legend>Users</legend>
                    <ul id="device_users">
                    </ul>
                </fieldset>
              </div>
            </div>
            <div class="control-group">
              <div class="controls">
                <fieldset class="well span5">
                  <legend>Store Item</legend>
                  <div>
                    <ul id="device_storeitems">
                    </ul>
                  </div>
                </fieldset>
              </div>
            </div>
          </fieldset>
        </form>
      </div>

      <!-- Deployment Targets template Start -->
      <div id="admin_deploytarget_list" class="hidden_template row-fluid">
        <div class="alerts"></div>
        <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="admin_deploytargets_table"></table>
      </div>

      <div id="admin_deploytarget_edit" class="hidden_template row-fluid">
        <div class="alerts"></div>
        <form class="well form-horizontal">
          <fieldset>
            <legend id="target_edit_header"></legend>
            <p>Here you can edit Deployment Target settings/login credentials for deploying your cloud code to various Platform-as-a-Service and Infrastructure-as-a-Service providers</p>
            <br />
            <div class="control-group required">
              <label id="deploy_target_name_label" class="control-label insert-help-icon" for="deploy_target_name">Target Name</label>
              <div class="controls">
                <input type="text" id="deploy_target_name" class="input-xxlarge"></input>
              </div>
            </div>
            <div class="control-group required">
              <label id="deploy_target_platform_label" class="control-label insert-help-icon" for="deploy_target_platform">Target Platform</label>
              <div class="controls" id="deploy_target_platform">
                <ul class="thumbnails">
                  
                </ul>
              </div>
            </div>
            <div class="control-group required">
              <label id="deploy_target_envs_label" class="control-label insert-help-icon" for="deploy_target_envs">Environment</label>
              <div class="controls" id="deploy_target_envs">
                <label class="checkbox">
                  <input type="checkbox" id="deploy_target_env_dev" value="dev"> Development
                </label>
                <label class="checkbox">
                  <input type="checkbox" id="deploy_target_env_live" value="live"> Live
                </label>
              </div>
            </div>
            <div class="control-group target-settings target-settings-url required">
              <label id="deploy_target_setting_url_label" class="control-label insert-help-icon" for="deploy_target_setting_url">Deploy URL</label>
              <div class="controls">
                <input type="text" id="deploy_target_setting_url"></input>
              </div>
            </div>
            <div class="control-group target-settings target-settings-infrastructure required">
              <label id="deploy_target_setting_infrastructure_label" class="control-label insert-help-icon" for="deploy_target_setting_infrastructure">Infrastructure</label>
              <div class="controls">
                <select type="text" id="deploy_target_setting_infrastructure"></select>
              </div>
            </div>
            <div class="control-group target-settings target-settings-username required">
              <label id="deploy_target_setting_username_label" class="control-label insert-help-icon" for="deploy_target_setting_username">Username</label>
              <div class="controls">
                <input type="text" id="deploy_target_setting_username"></input>
              </div>
            </div>
            <div class="control-group target-settings target-settings-password required">
              <label id="deploy_target_setting_password_label" class="control-label insert-help-icon" for="deploy_target_setting_password">Password</label>
              <div class="controls">
                <input type="password" id="deploy_target_setting_password"></input>
              </div>
            </div>
          </fieldset>
          <div class="form-actions">
            <button type="button" id="save_deploy_target_btn" class="btn btn-primary"></button> 
            <button type="button" id="cancel_deploy_target_btn" class="btn"> Back </button> 
          </div>
        </form>
      </div>
      <!-- Deployment Targets template End -->

      </div>
    </div>

</div>
</div>

<!-- Binary Upload progress template -->
<div id="binary_upload_progress_template" class="hidden_template progress_area">
  <div class="progress progress-striped active" style="display: none">
    <div class="bar" style="width: 0%;"></div>
  </div>
  <span class="status" style="display: none"></span>
</div>

<!-- Binary Upload progress template -->
<span id="binary_upload_status" class="label label-inverse upload_status hidden_template"></span>

